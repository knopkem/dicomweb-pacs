{"version":3,"file":"8815.bundle.3337de6f7e7de19c3de0.js","mappings":"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","sources":["webpack:///../../../modes/segmentation/src/id.js","webpack:///../../../modes/segmentation/src/toolbarButtons.ts","webpack:///../../../modes/segmentation/src/initToolGroups.ts","webpack:///../../../modes/segmentation/src/index.tsx"],"sourcesContent":["import packageJson from '../package.json';\r\n\r\nconst id = packageJson.name;\r\n\r\nexport { id };\r\n","import type { Button } from '@ohif/core/types';\r\nimport { ViewportGridService } from '@ohif/core';\r\n\r\nconst setToolActiveToolbar = {\r\n  commandName: 'setToolActiveToolbar',\r\n  commandOptions: {\r\n    toolGroupIds: ['default', 'mpr', 'SRToolGroup', 'volume3d'],\r\n  },\r\n};\r\n\r\nconst callbacks = (toolName: string) => [\r\n  {\r\n    commandName: 'setViewportForToolConfiguration',\r\n    commandOptions: {\r\n      toolName,\r\n    },\r\n  },\r\n];\r\n\r\nconst toolbarButtons: Button[] = [\r\n  // sections\r\n  {\r\n    id: 'MoreTools',\r\n    uiType: 'ohif.toolButtonList',\r\n    props: {\r\n      buttonSection: 'moreToolsSection',\r\n      groupId: 'MoreTools',\r\n    },\r\n  },\r\n  {\r\n    id: 'BrushTools',\r\n    uiType: 'ohif.toolBoxButtonGroup',\r\n    props: {\r\n      groupId: 'BrushTools',\r\n      buttonSection: 'brushToolsSection',\r\n    },\r\n  },\r\n  // Section containers for the nested toolbox\r\n  {\r\n    id: 'SegmentationUtilities',\r\n    uiType: 'ohif.toolBoxButton',\r\n    props: {\r\n      groupId: 'SegmentationUtilities',\r\n      buttonSection: 'segmentationToolboxUtilitySection',\r\n    },\r\n  },\r\n  {\r\n    id: 'SegmentationTools',\r\n    uiType: 'ohif.toolBoxButton',\r\n    props: {\r\n      groupId: 'SegmentationTools',\r\n      buttonSection: 'segmentationToolboxToolsSection',\r\n    },\r\n  },\r\n  // tool defs\r\n  {\r\n    id: 'Zoom',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-zoom',\r\n      label: 'Zoom',\r\n      commands: setToolActiveToolbar,\r\n      evaluate: 'evaluate.cornerstoneTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'WindowLevel',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-window-level',\r\n      label: 'Window Level',\r\n      commands: setToolActiveToolbar,\r\n      evaluate: 'evaluate.cornerstoneTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'Pan',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-move',\r\n      label: 'Pan',\r\n      commands: setToolActiveToolbar,\r\n      evaluate: 'evaluate.cornerstoneTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'TrackballRotate',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      type: 'tool',\r\n      icon: 'tool-3d-rotate',\r\n      label: '3D Rotate',\r\n      commands: setToolActiveToolbar,\r\n      evaluate: {\r\n        name: 'evaluate.cornerstoneTool',\r\n        disabledText: 'Select a 3D viewport to enable this tool',\r\n      },\r\n    },\r\n  },\r\n  {\r\n    id: 'Capture',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-capture',\r\n      label: 'Capture',\r\n      commands: 'showDownloadViewportModal',\r\n      evaluate: [\r\n        'evaluate.action',\r\n        {\r\n          name: 'evaluate.viewport.supported',\r\n          unsupportedViewportTypes: ['video', 'wholeSlide'],\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'Layout',\r\n    uiType: 'ohif.layoutSelector',\r\n    props: {\r\n      rows: 3,\r\n      columns: 4,\r\n      evaluate: 'evaluate.action',\r\n      commands: 'setViewportGridLayout',\r\n    },\r\n  },\r\n  {\r\n    id: 'Crosshairs',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-crosshair',\r\n      label: 'Crosshairs',\r\n      commands: {\r\n        commandName: 'setToolActiveToolbar',\r\n        commandOptions: {\r\n          toolGroupIds: ['mpr'],\r\n        },\r\n      },\r\n      evaluate: {\r\n        name: 'evaluate.cornerstoneTool',\r\n        disabledText: 'Select an MPR viewport to enable this tool',\r\n      },\r\n    },\r\n  },\r\n  {\r\n    id: 'Reset',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-reset',\r\n      label: 'Reset View',\r\n      tooltip: 'Reset View',\r\n      commands: 'resetViewport',\r\n      evaluate: 'evaluate.action',\r\n    },\r\n  },\r\n  {\r\n    id: 'rotate-right',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-rotate-right',\r\n      label: 'Rotate Right',\r\n      tooltip: 'Rotate +90',\r\n      commands: 'rotateViewportCW',\r\n      evaluate: 'evaluate.action',\r\n    },\r\n  },\r\n  {\r\n    id: 'flipHorizontal',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-flip-horizontal',\r\n      label: 'Flip Horizontal',\r\n      tooltip: 'Flip Horizontally',\r\n      commands: 'flipViewportHorizontal',\r\n      evaluate: [\r\n        'evaluate.viewportProperties.toggle',\r\n        {\r\n          name: 'evaluate.viewport.supported',\r\n          unsupportedViewportTypes: ['volume3d'],\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'ReferenceLines',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-referenceLines',\r\n      label: 'Reference Lines',\r\n      tooltip: 'Show Reference Lines',\r\n      commands: 'toggleEnabledDisabledToolbar',\r\n      evaluate: 'evaluate.cornerstoneTool.toggle',\r\n    },\r\n  },\r\n  {\r\n    id: 'ImageOverlayViewer',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'toggle-dicom-overlay',\r\n      label: 'Image Overlay',\r\n      tooltip: 'Toggle Image Overlay',\r\n      commands: 'toggleEnabledDisabledToolbar',\r\n      evaluate: 'evaluate.cornerstoneTool.toggle',\r\n    },\r\n  },\r\n  {\r\n    id: 'StackScroll',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-stack-scroll',\r\n      label: 'Stack Scroll',\r\n      tooltip: 'Stack Scroll',\r\n      commands: setToolActiveToolbar,\r\n      evaluate: 'evaluate.cornerstoneTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'invert',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-invert',\r\n      label: 'Invert',\r\n      tooltip: 'Invert Colors',\r\n      commands: 'invertViewport',\r\n      evaluate: 'evaluate.viewportProperties.toggle',\r\n    },\r\n  },\r\n  {\r\n    id: 'Cine',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-cine',\r\n      label: 'Cine',\r\n      tooltip: 'Cine',\r\n      commands: 'toggleCine',\r\n      evaluate: [\r\n        'evaluate.cine',\r\n        {\r\n          name: 'evaluate.viewport.supported',\r\n          unsupportedViewportTypes: ['volume3d'],\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'Magnify',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'tool-magnify',\r\n      label: 'Zoom-in',\r\n      tooltip: 'Zoom-in',\r\n      commands: setToolActiveToolbar,\r\n      evaluate: 'evaluate.cornerstoneTool',\r\n    },\r\n  },\r\n  {\r\n    id: 'TagBrowser',\r\n    uiType: 'ohif.toolButton',\r\n    props: {\r\n      icon: 'dicom-tag-browser',\r\n      label: 'Dicom Tag Browser',\r\n      tooltip: 'Dicom Tag Browser',\r\n      commands: 'openDICOMTagViewer',\r\n    },\r\n  },\r\n\r\n  {\r\n    id: 'Brush',\r\n    uiType: 'ohif.toolBoxButton',\r\n    props: {\r\n      icon: 'icon-tool-brush',\r\n      label: 'Brush',\r\n      evaluate: {\r\n        name: 'evaluate.cornerstone.segmentation',\r\n        toolNames: ['CircularBrush', 'SphereBrush'],\r\n        disabledText: 'Create new segmentation to enable this tool.',\r\n      },\r\n      options: [\r\n        {\r\n          name: 'Radius (mm)',\r\n          id: 'brush-radius',\r\n          type: 'range',\r\n          min: 0.5,\r\n          max: 99.5,\r\n          step: 0.5,\r\n          value: 25,\r\n          commands: {\r\n            commandName: 'setBrushSize',\r\n            commandOptions: { toolNames: ['CircularBrush', 'SphereBrush'] },\r\n          },\r\n        },\r\n        {\r\n          name: 'Shape',\r\n          type: 'radio',\r\n          id: 'brush-mode',\r\n          value: 'CircularBrush',\r\n          values: [\r\n            { value: 'CircularBrush', label: 'Circle' },\r\n            { value: 'SphereBrush', label: 'Sphere' },\r\n          ],\r\n          commands: 'setToolActiveToolbar',\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'InterpolateLabelmap',\r\n    uiType: 'ohif.toolBoxButton',\r\n    props: {\r\n      icon: 'icon-tool-interpolation',\r\n      label: 'Interpolate Labelmap',\r\n      tooltip:\r\n        'Automatically fill in missing slices between drawn segments. Use brush or threshold tools on at least two slices, then click to interpolate across slices. Works in any direction. Volume must be reconstructable.',\r\n      evaluate: [\r\n        'evaluate.cornerstone.segmentation',\r\n        {\r\n          name: 'evaluate.displaySetIsReconstructable',\r\n          disabledText: 'The current viewport cannot handle interpolation.',\r\n        },\r\n      ],\r\n      commands: 'interpolateLabelmap',\r\n    },\r\n  },\r\n  {\r\n    id: 'SegmentBidirectional',\r\n    uiType: 'ohif.toolBoxButton',\r\n    props: {\r\n      icon: 'icon-tool-bidirectional-segment',\r\n      label: 'Segment Bidirectional',\r\n      tooltip:\r\n        'Automatically detects the largest length and width across slices for the selected segment and displays a bidirectional measurement.',\r\n      evaluate: {\r\n        name: 'evaluate.cornerstone.segmentation',\r\n        disabledText: 'Create new segmentation to enable this tool.',\r\n      },\r\n      commands: 'runSegmentBidirectional',\r\n    },\r\n  },\r\n  {\r\n    id: 'RegionSegmentPlus',\r\n    uiType: 'ohif.toolBoxButton',\r\n    props: {\r\n      icon: 'icon-tool-click-segment',\r\n      label: 'One Click Segment',\r\n      tooltip:\r\n        'Detects segmentable regions with one click. Hover for visual feedbackâ€”click when a plus sign appears to auto-segment the lesion.',\r\n      evaluate: {\r\n        name: 'evaluate.cornerstone.segmentation',\r\n        toolNames: ['RegionSegmentPlus'],\r\n        disabledText: 'Create new segmentation to enable this tool.',\r\n      },\r\n      commands: 'setToolActiveToolbar',\r\n    },\r\n  },\r\n  {\r\n    id: 'LabelmapSlicePropagation',\r\n    uiType: 'ohif.toolBoxButton',\r\n    props: {\r\n      icon: 'icon-labelmap-slice-propagation',\r\n      label: 'Labelmap Assist',\r\n      tooltip:\r\n        'Toggle AI assistance for segmenting nearby slices. After drawing on a slice, scroll to preview predictions. Press Enter to accept or Esc to skip.',\r\n      evaluate: [\r\n        'evaluate.cornerstoneTool.toggle',\r\n        {\r\n          name: 'evaluate.cornerstone.hasSegmentation',\r\n        },\r\n      ],\r\n      listeners: {\r\n        [ViewportGridService.EVENTS.ACTIVE_VIEWPORT_ID_CHANGED]: callbacks(\r\n          'LabelmapSlicePropagation'\r\n        ),\r\n        [ViewportGridService.EVENTS.VIEWPORTS_READY]: callbacks('LabelmapSlicePropagation'),\r\n      },\r\n      commands: 'toggleEnabledDisabledToolbar',\r\n    },\r\n  },\r\n  {\r\n    id: 'MarkerLabelmap',\r\n    uiType: 'ohif.toolBoxButton',\r\n    props: {\r\n      icon: 'icon-marker-labelmap',\r\n      label: 'Marker Guided Labelmap',\r\n      tooltip:\r\n        'Use include/exclude markers to guide AI (SAM) segmentation. Click to place markers, Enter to accept results, Esc to reject, and N to go to the next slice while keeping markers.',\r\n      evaluate: [\r\n        {\r\n          name: 'evaluate.cornerstone.segmentation',\r\n          toolNames: ['MarkerLabelmap', 'MarkerInclude', 'MarkerExclude'],\r\n        },\r\n      ],\r\n      commands: 'setToolActiveToolbar',\r\n      listeners: {\r\n        [ViewportGridService.EVENTS.ACTIVE_VIEWPORT_ID_CHANGED]: callbacks('MarkerLabelmap'),\r\n        [ViewportGridService.EVENTS.VIEWPORTS_READY]: callbacks('MarkerLabelmap'),\r\n      },\r\n      options: [\r\n        {\r\n          name: 'Marker Mode',\r\n          type: 'radio',\r\n          id: 'marker-mode',\r\n          value: 'markerInclude',\r\n          values: [\r\n            { value: 'markerInclude', label: 'Include' },\r\n            { value: 'markerExclude', label: 'Exclude' },\r\n          ],\r\n          commands: ({ commandsManager, options }) => {\r\n            const markerModeOption = options.find(option => option.id === 'marker-mode');\r\n            if (markerModeOption.value === 'markerInclude') {\r\n              commandsManager.run('setToolActive', {\r\n                toolName: 'MarkerInclude',\r\n              });\r\n            } else {\r\n              commandsManager.run('setToolActive', {\r\n                toolName: 'MarkerExclude',\r\n              });\r\n            }\r\n          },\r\n        },\r\n        {\r\n          name: 'Clear Markers',\r\n          type: 'button',\r\n          id: 'clear-markers',\r\n          commands: 'clearMarkersForMarkerLabelmap',\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'Eraser',\r\n    uiType: 'ohif.toolBoxButton',\r\n    props: {\r\n      icon: 'icon-tool-eraser',\r\n      label: 'Eraser',\r\n      evaluate: {\r\n        name: 'evaluate.cornerstone.segmentation',\r\n        toolNames: ['CircularEraser', 'SphereEraser'],\r\n      },\r\n      options: [\r\n        {\r\n          name: 'Radius (mm)',\r\n          id: 'eraser-radius',\r\n          type: 'range',\r\n          min: 0.5,\r\n          max: 99.5,\r\n          step: 0.5,\r\n          value: 25,\r\n          commands: {\r\n            commandName: 'setBrushSize',\r\n            commandOptions: { toolNames: ['CircularEraser', 'SphereEraser'] },\r\n          },\r\n        },\r\n        {\r\n          name: 'Shape',\r\n          type: 'radio',\r\n          id: 'eraser-mode',\r\n          value: 'CircularEraser',\r\n          values: [\r\n            { value: 'CircularEraser', label: 'Circle' },\r\n            { value: 'SphereEraser', label: 'Sphere' },\r\n          ],\r\n          commands: 'setToolActiveToolbar',\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'Threshold',\r\n    uiType: 'ohif.toolBoxButton',\r\n    props: {\r\n      icon: 'icon-tool-threshold',\r\n      label: 'Threshold Tool',\r\n      evaluate: {\r\n        name: 'evaluate.cornerstone.segmentation',\r\n        toolNames: [\r\n          'ThresholdCircularBrush',\r\n          'ThresholdSphereBrush',\r\n          'ThresholdCircularBrushDynamic',\r\n          'ThresholdSphereBrushDynamic',\r\n        ],\r\n      },\r\n      options: [\r\n        {\r\n          name: 'Radius (mm)',\r\n          id: 'threshold-radius',\r\n          type: 'range',\r\n          min: 0.5,\r\n          max: 99.5,\r\n          step: 0.5,\r\n          value: 25,\r\n          commands: {\r\n            commandName: 'setBrushSize',\r\n            commandOptions: {\r\n              toolNames: [\r\n                'ThresholdCircularBrush',\r\n                'ThresholdSphereBrush',\r\n                'ThresholdCircularBrushDynamic',\r\n                'ThresholdSphereBrushDynamic',\r\n              ],\r\n            },\r\n          },\r\n        },\r\n        {\r\n          name: 'Shape',\r\n          type: 'radio',\r\n          id: 'threshold-shape',\r\n          value: 'ThresholdCircularBrush',\r\n          values: [\r\n            { value: 'ThresholdCircularBrush', label: 'Circle' },\r\n            { value: 'ThresholdSphereBrush', label: 'Sphere' },\r\n          ],\r\n          commands: ({ value, commandsManager, options }) => {\r\n            const optionsDynamic = options.find(option => option.id === 'dynamic-mode');\r\n\r\n            if (optionsDynamic.value === 'ThresholdDynamic') {\r\n              commandsManager.run('setToolActive', {\r\n                toolName:\r\n                  value === 'ThresholdCircularBrush'\r\n                    ? 'ThresholdCircularBrushDynamic'\r\n                    : 'ThresholdSphereBrushDynamic',\r\n              });\r\n            } else {\r\n              commandsManager.run('setToolActive', {\r\n                toolName: value,\r\n              });\r\n            }\r\n          },\r\n        },\r\n        {\r\n          name: 'Threshold',\r\n          type: 'radio',\r\n          id: 'dynamic-mode',\r\n          value: 'ThresholdDynamic',\r\n          values: [\r\n            { value: 'ThresholdDynamic', label: 'Dynamic' },\r\n            { value: 'ThresholdRange', label: 'Range' },\r\n          ],\r\n          commands: ({ value, commandsManager, options }) => {\r\n            const thresholdRangeOption = options.find(option => option.id === 'threshold-shape');\r\n\r\n            if (value === 'ThresholdDynamic') {\r\n              commandsManager.run('setToolActiveToolbar', {\r\n                toolName:\r\n                  thresholdRangeOption.value === 'ThresholdCircularBrush'\r\n                    ? 'ThresholdCircularBrushDynamic'\r\n                    : 'ThresholdSphereBrushDynamic',\r\n              });\r\n            } else {\r\n              commandsManager.run('setToolActiveToolbar', {\r\n                toolName: thresholdRangeOption.value,\r\n              });\r\n\r\n              const thresholdRangeValue = options.find(\r\n                option => option.id === 'threshold-range'\r\n              ).value;\r\n\r\n              commandsManager.run('setThresholdRange', {\r\n                toolNames: ['ThresholdCircularBrush', 'ThresholdSphereBrush'],\r\n                value: thresholdRangeValue,\r\n              });\r\n            }\r\n          },\r\n        },\r\n        {\r\n          name: 'ThresholdRange',\r\n          type: 'double-range',\r\n          id: 'threshold-range',\r\n          min: -1000,\r\n          max: 1000,\r\n          step: 1,\r\n          value: [50, 600],\r\n          condition: ({ options }) =>\r\n            options.find(option => option.id === 'dynamic-mode').value === 'ThresholdRange',\r\n          commands: {\r\n            commandName: 'setThresholdRange',\r\n            commandOptions: {\r\n              toolNames: ['ThresholdCircularBrush', 'ThresholdSphereBrush'],\r\n            },\r\n          },\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  {\r\n    id: 'Shapes',\r\n    uiType: 'ohif.toolBoxButton',\r\n    props: {\r\n      icon: 'icon-tool-shape',\r\n      label: 'Shapes',\r\n      evaluate: {\r\n        name: 'evaluate.cornerstone.segmentation',\r\n        toolNames: ['CircleScissor', 'SphereScissor', 'RectangleScissor'],\r\n        disabledText: 'Create new segmentation to enable shapes tool.',\r\n      },\r\n      options: [\r\n        {\r\n          name: 'Shape',\r\n          type: 'radio',\r\n          value: 'CircleScissor',\r\n          id: 'shape-mode',\r\n          values: [\r\n            { value: 'CircleScissor', label: 'Circle' },\r\n            { value: 'SphereScissor', label: 'Sphere' },\r\n            { value: 'RectangleScissor', label: 'Rectangle' },\r\n          ],\r\n          commands: 'setToolActiveToolbar',\r\n        },\r\n      ],\r\n    },\r\n  },\r\n];\r\n\r\nexport default toolbarButtons;\r\n","const colours = {\r\n  'viewport-0': 'rgb(200, 0, 0)',\r\n  'viewport-1': 'rgb(200, 200, 0)',\r\n  'viewport-2': 'rgb(0, 200, 0)',\r\n};\r\n\r\nconst colorsByOrientation = {\r\n  axial: 'rgb(200, 0, 0)',\r\n  sagittal: 'rgb(200, 200, 0)',\r\n  coronal: 'rgb(0, 200, 0)',\r\n};\r\n\r\nfunction createTools(utilityModule) {\r\n  const { toolNames, Enums } = utilityModule.exports;\r\n  return {\r\n    active: [\r\n      { toolName: toolNames.WindowLevel, bindings: [{ mouseButton: Enums.MouseBindings.Primary }] },\r\n      { toolName: toolNames.Pan, bindings: [{ mouseButton: Enums.MouseBindings.Auxiliary }] },\r\n      { toolName: toolNames.Zoom, bindings: [{ mouseButton: Enums.MouseBindings.Secondary }] },\r\n      { toolName: toolNames.StackScroll, bindings: [{ mouseButton: Enums.MouseBindings.Wheel }] },\r\n    ],\r\n    passive: [\r\n      {\r\n        toolName: 'CircularBrush',\r\n        parentTool: 'Brush',\r\n        configuration: {\r\n          activeStrategy: 'FILL_INSIDE_CIRCLE',\r\n        },\r\n      },\r\n      {\r\n        toolName: toolNames.LabelmapSlicePropagation,\r\n      },\r\n      {\r\n        toolName: toolNames.MarkerLabelmap,\r\n      },\r\n      {\r\n        toolName: toolNames.RegionSegmentPlus,\r\n      },\r\n      {\r\n        toolName: 'CircularEraser',\r\n        parentTool: 'Brush',\r\n        configuration: {\r\n          activeStrategy: 'ERASE_INSIDE_CIRCLE',\r\n        },\r\n      },\r\n      {\r\n        toolName: 'SphereBrush',\r\n        parentTool: 'Brush',\r\n        configuration: {\r\n          activeStrategy: 'FILL_INSIDE_SPHERE',\r\n        },\r\n      },\r\n      {\r\n        toolName: 'SphereEraser',\r\n        parentTool: 'Brush',\r\n        configuration: {\r\n          activeStrategy: 'ERASE_INSIDE_SPHERE',\r\n        },\r\n      },\r\n      {\r\n        toolName: 'ThresholdCircularBrush',\r\n        parentTool: 'Brush',\r\n        configuration: {\r\n          activeStrategy: 'THRESHOLD_INSIDE_CIRCLE',\r\n        },\r\n      },\r\n      {\r\n        toolName: 'ThresholdSphereBrush',\r\n        parentTool: 'Brush',\r\n        configuration: {\r\n          activeStrategy: 'THRESHOLD_INSIDE_SPHERE',\r\n        },\r\n      },\r\n      {\r\n        toolName: 'ThresholdCircularBrushDynamic',\r\n        parentTool: 'Brush',\r\n        configuration: {\r\n          activeStrategy: 'THRESHOLD_INSIDE_CIRCLE',\r\n          threshold: {\r\n            isDynamic: true,\r\n            dynamicRadius: 3,\r\n          },\r\n        },\r\n      },\r\n      {\r\n        toolName: toolNames.SegmentBidirectional,\r\n      },\r\n      {\r\n        toolName: toolNames.SegmentSelect,\r\n      },\r\n      {\r\n        toolName: 'ThresholdSphereBrushDynamic',\r\n        parentTool: 'Brush',\r\n        configuration: {\r\n          activeStrategy: 'THRESHOLD_INSIDE_SPHERE',\r\n          threshold: {\r\n            isDynamic: true,\r\n            dynamicRadius: 3,\r\n          },\r\n        },\r\n      },\r\n      { toolName: toolNames.CircleScissors },\r\n      { toolName: toolNames.RectangleScissors },\r\n      { toolName: toolNames.SphereScissors },\r\n      { toolName: toolNames.StackScroll },\r\n      { toolName: toolNames.Magnify },\r\n      { toolName: toolNames.WindowLevelRegion },\r\n\r\n      { toolName: toolNames.UltrasoundDirectional },\r\n    ],\r\n    disabled: [{ toolName: toolNames.ReferenceLines }, { toolName: toolNames.AdvancedMagnify }],\r\n  };\r\n}\r\n\r\nfunction initDefaultToolGroup(extensionManager, toolGroupService, commandsManager, toolGroupId) {\r\n  const utilityModule = extensionManager.getModuleEntry(\r\n    '@ohif/extension-cornerstone.utilityModule.tools'\r\n  );\r\n  const tools = createTools(utilityModule);\r\n  toolGroupService.createToolGroupAndAddTools(toolGroupId, tools);\r\n}\r\n\r\nfunction initMPRToolGroup(extensionManager, toolGroupService, commandsManager) {\r\n  const utilityModule = extensionManager.getModuleEntry(\r\n    '@ohif/extension-cornerstone.utilityModule.tools'\r\n  );\r\n  const servicesManager = extensionManager._servicesManager;\r\n  const { cornerstoneViewportService } = servicesManager.services;\r\n  const tools = createTools(utilityModule);\r\n  tools.disabled.push(\r\n    {\r\n      toolName: utilityModule.exports.toolNames.Crosshairs,\r\n      configuration: {\r\n        viewportIndicators: true,\r\n        viewportIndicatorsConfig: {\r\n          circleRadius: 5,\r\n          xOffset: 0.95,\r\n          yOffset: 0.05,\r\n        },\r\n        disableOnPassive: true,\r\n        autoPan: {\r\n          enabled: false,\r\n          panSize: 10,\r\n        },\r\n        getReferenceLineColor: viewportId => {\r\n          const viewportInfo = cornerstoneViewportService.getViewportInfo(viewportId);\r\n          const viewportOptions = viewportInfo?.viewportOptions;\r\n          if (viewportOptions) {\r\n            return (\r\n              colours[viewportOptions.id] ||\r\n              colorsByOrientation[viewportOptions.orientation] ||\r\n              '#0c0'\r\n            );\r\n          } else {\r\n            console.warn('missing viewport?', viewportId);\r\n            return '#0c0';\r\n          }\r\n        },\r\n      },\r\n    },\r\n    { toolName: utilityModule.exports.toolNames.ReferenceLines }\r\n  );\r\n  toolGroupService.createToolGroupAndAddTools('mpr', tools);\r\n}\r\n\r\nfunction initVolume3DToolGroup(extensionManager, toolGroupService) {\r\n  const utilityModule = extensionManager.getModuleEntry(\r\n    '@ohif/extension-cornerstone.utilityModule.tools'\r\n  );\r\n\r\n  const { toolNames, Enums } = utilityModule.exports;\r\n\r\n  const tools = {\r\n    active: [\r\n      {\r\n        toolName: toolNames.TrackballRotateTool,\r\n        bindings: [{ mouseButton: Enums.MouseBindings.Primary }],\r\n      },\r\n      {\r\n        toolName: toolNames.Zoom,\r\n        bindings: [{ mouseButton: Enums.MouseBindings.Secondary }],\r\n      },\r\n      {\r\n        toolName: toolNames.Pan,\r\n        bindings: [{ mouseButton: Enums.MouseBindings.Auxiliary }],\r\n      },\r\n    ],\r\n  };\r\n\r\n  toolGroupService.createToolGroupAndAddTools('volume3d', tools);\r\n}\r\n\r\nfunction initToolGroups(extensionManager, toolGroupService, commandsManager) {\r\n  initDefaultToolGroup(extensionManager, toolGroupService, commandsManager, 'default');\r\n  initMPRToolGroup(extensionManager, toolGroupService, commandsManager);\r\n  initVolume3DToolGroup(extensionManager, toolGroupService);\r\n}\r\n\r\nexport default initToolGroups;\r\n","import { id } from './id';\r\nimport toolbarButtons from './toolbarButtons';\r\nimport initToolGroups from './initToolGroups';\r\n\r\nconst ohif = {\r\n  layout: '@ohif/extension-default.layoutTemplateModule.viewerLayout',\r\n  sopClassHandler: '@ohif/extension-default.sopClassHandlerModule.stack',\r\n  hangingProtocol: '@ohif/extension-default.hangingProtocolModule.default',\r\n  leftPanel: '@ohif/extension-default.panelModule.seriesList',\r\n};\r\n\r\nconst cornerstone = {\r\n  viewport: '@ohif/extension-cornerstone.viewportModule.cornerstone',\r\n  panelTool: '@ohif/extension-cornerstone.panelModule.panelSegmentationWithTools',\r\n  measurements: '@ohif/extension-cornerstone.panelModule.panelMeasurement',\r\n};\r\n\r\nconst segmentation = {\r\n  sopClassHandler: '@ohif/extension-cornerstone-dicom-seg.sopClassHandlerModule.dicom-seg',\r\n  viewport: '@ohif/extension-cornerstone-dicom-seg.viewportModule.dicom-seg',\r\n};\r\n\r\nconst dicomRT = {\r\n  viewport: '@ohif/extension-cornerstone-dicom-rt.viewportModule.dicom-rt',\r\n  sopClassHandler: '@ohif/extension-cornerstone-dicom-rt.sopClassHandlerModule.dicom-rt',\r\n};\r\n/**\r\n * Just two dependencies to be able to render a viewport with panels in order\r\n * to make sure that the mode is working.\r\n */\r\nconst extensionDependencies = {\r\n  '@ohif/extension-default': '^3.0.0',\r\n  '@ohif/extension-cornerstone': '^3.0.0',\r\n  '@ohif/extension-cornerstone-dicom-seg': '^3.0.0',\r\n  '@ohif/extension-cornerstone-dicom-rt': '^3.0.0',\r\n};\r\n\r\nfunction modeFactory({ modeConfiguration }) {\r\n  return {\r\n    /**\r\n     * Mode ID, which should be unique among modes used by the viewer. This ID\r\n     * is used to identify the mode in the viewer's state.\r\n     */\r\n    id,\r\n    routeName: 'segmentation',\r\n    /**\r\n     * Mode name, which is displayed in the viewer's UI in the workList, for the\r\n     * user to select the mode.\r\n     */\r\n    displayName: 'Segmentation',\r\n    /**\r\n     * Runs when the Mode Route is mounted to the DOM. Usually used to initialize\r\n     * Services and other resources.\r\n     */\r\n    onModeEnter: ({ servicesManager, extensionManager, commandsManager }: withAppTypes) => {\r\n      const { measurementService, toolbarService, toolGroupService, customizationService } =\r\n        servicesManager.services;\r\n\r\n      measurementService.clearMeasurements();\r\n\r\n      // Init Default and SR ToolGroups\r\n      initToolGroups(extensionManager, toolGroupService, commandsManager);\r\n\r\n      toolbarService.addButtons(toolbarButtons);\r\n\r\n      toolbarService.createButtonSection('primary', [\r\n        'WindowLevel',\r\n        'Pan',\r\n        'Zoom',\r\n        'TrackballRotate',\r\n        'Capture',\r\n        'Layout',\r\n        'Crosshairs',\r\n        'MoreTools',\r\n      ]);\r\n\r\n      toolbarService.createButtonSection('moreToolsSection', [\r\n        'Reset',\r\n        'rotate-right',\r\n        'flipHorizontal',\r\n        'ReferenceLines',\r\n        'ImageOverlayViewer',\r\n        'StackScroll',\r\n        'invert',\r\n        'Cine',\r\n        'Magnify',\r\n        'TagBrowser',\r\n      ]);\r\n\r\n      toolbarService.createButtonSection('segmentationToolbox', [\r\n        'SegmentationUtilities',\r\n        'SegmentationTools',\r\n      ]);\r\n      toolbarService.createButtonSection('segmentationToolboxUtilitySection', [\r\n        'LabelmapSlicePropagation',\r\n        'InterpolateLabelmap',\r\n        'SegmentBidirectional',\r\n      ]);\r\n      toolbarService.createButtonSection('segmentationToolboxToolsSection', [\r\n        'BrushTools',\r\n        'MarkerLabelmap',\r\n        'RegionSegmentPlus',\r\n        'Shapes',\r\n      ]);\r\n      toolbarService.createButtonSection('brushToolsSection', ['Brush', 'Eraser', 'Threshold']);\r\n    },\r\n    onModeExit: ({ servicesManager }: withAppTypes) => {\r\n      const {\r\n        toolGroupService,\r\n        syncGroupService,\r\n        segmentationService,\r\n        cornerstoneViewportService,\r\n        uiDialogService,\r\n        uiModalService,\r\n      } = servicesManager.services;\r\n\r\n      uiDialogService.hideAll();\r\n      uiModalService.hide();\r\n      toolGroupService.destroy();\r\n      syncGroupService.destroy();\r\n      segmentationService.destroy();\r\n      cornerstoneViewportService.destroy();\r\n    },\r\n    /** */\r\n    validationTags: {\r\n      study: [],\r\n      series: [],\r\n    },\r\n    /**\r\n     * A boolean return value that indicates whether the mode is valid for the\r\n     * modalities of the selected studies. Currently we don't have stack viewport\r\n     * segmentations and we should exclude them\r\n     */\r\n    isValidMode: ({ modalities }) => {\r\n      // Don't show the mode if the selected studies have only one modality\r\n      // that is not supported by the mode\r\n      const modalitiesArray = modalities.split('\\\\');\r\n      return {\r\n        valid:\r\n          modalitiesArray.length === 1\r\n            ? !['SM', 'ECG', 'OT', 'DOC'].includes(modalitiesArray[0])\r\n            : true,\r\n        description:\r\n          'The mode does not support studies that ONLY include the following modalities: SM, OT, DOC',\r\n      };\r\n    },\r\n    /**\r\n     * Mode Routes are used to define the mode's behavior. A list of Mode Route\r\n     * that includes the mode's path and the layout to be used. The layout will\r\n     * include the components that are used in the layout. For instance, if the\r\n     * default layoutTemplate is used (id: '@ohif/extension-default.layoutTemplateModule.viewerLayout')\r\n     * it will include the leftPanels, rightPanels, and viewports. However, if\r\n     * you define another layoutTemplate that includes a Footer for instance,\r\n     * you should provide the Footer component here too. Note: We use Strings\r\n     * to reference the component's ID as they are registered in the internal\r\n     * ExtensionManager. The template for the string is:\r\n     * `${extensionId}.{moduleType}.${componentId}`.\r\n     */\r\n    routes: [\r\n      {\r\n        path: 'template',\r\n        layoutTemplate: ({ location, servicesManager }) => {\r\n          return {\r\n            id: ohif.layout,\r\n            props: {\r\n              leftPanels: [ohif.leftPanel],\r\n              leftPanelResizable: true,\r\n              rightPanels: [cornerstone.panelTool, cornerstone.measurements],\r\n              rightPanelResizable: true,\r\n              // leftPanelClosed: true,\r\n              viewports: [\r\n                {\r\n                  namespace: cornerstone.viewport,\r\n                  displaySetsToDisplay: [ohif.sopClassHandler],\r\n                },\r\n                {\r\n                  namespace: segmentation.viewport,\r\n                  displaySetsToDisplay: [segmentation.sopClassHandler],\r\n                },\r\n                {\r\n                  namespace: dicomRT.viewport,\r\n                  displaySetsToDisplay: [dicomRT.sopClassHandler],\r\n                },\r\n              ],\r\n            },\r\n          };\r\n        },\r\n      },\r\n    ],\r\n    /** List of extensions that are used by the mode */\r\n    extensions: extensionDependencies,\r\n    /** HangingProtocol used by the mode */\r\n    // Commented out to just use the most applicable registered hanging protocol\r\n    // The example is used for a grid layout to specify that as a preferred layout\r\n    hangingProtocol: ['@ohif/mnGrid'],\r\n    /** SopClassHandlers used by the mode */\r\n    sopClassHandlers: [ohif.sopClassHandler, segmentation.sopClassHandler, dicomRT.sopClassHandler],\r\n  };\r\n}\r\n\r\nconst mode = {\r\n  id,\r\n  modeFactory,\r\n  extensionDependencies,\r\n};\r\n\r\nexport default mode;\r\n"],"names":["id","packageJson","setToolActiveToolbar","commandName","commandOptions","toolGroupIds","callbacks","toolName","uiType","props","buttonSection","groupId","icon","label","commands","evaluate","type","name","disabledText","unsupportedViewportTypes","rows","columns","tooltip","toolNames","options","min","max","step","value","values","listeners","ViewportGridService","EVENTS","ACTIVE_VIEWPORT_ID_CHANGED","VIEWPORTS_READY","commandsManager","find","option","run","thresholdRangeOption","thresholdRangeValue","condition","colours","colorsByOrientation","axial","sagittal","coronal","createTools","utilityModule","Enums","exports","active","WindowLevel","bindings","mouseButton","MouseBindings","Primary","Pan","Auxiliary","Zoom","Secondary","StackScroll","Wheel","passive","parentTool","configuration","activeStrategy","LabelmapSlicePropagation","MarkerLabelmap","RegionSegmentPlus","threshold","isDynamic","dynamicRadius","SegmentBidirectional","SegmentSelect","CircleScissors","RectangleScissors","SphereScissors","Magnify","WindowLevelRegion","UltrasoundDirectional","disabled","ReferenceLines","AdvancedMagnify","extensionManager","toolGroupService","toolGroupId","tools","getModuleEntry","createToolGroupAndAddTools","initDefaultToolGroup","servicesManager","_servicesManager","cornerstoneViewportService","services","push","Crosshairs","viewportIndicators","viewportIndicatorsConfig","circleRadius","xOffset","yOffset","disableOnPassive","autoPan","enabled","panSize","getReferenceLineColor","viewportId","viewportInfo","getViewportInfo","viewportOptions","orientation","console","warn","initMPRToolGroup","TrackballRotateTool","initVolume3DToolGroup","ohif","cornerstone","segmentation","dicomRT","extensionDependencies","modeFactory","modeConfiguration","routeName","displayName","onModeEnter","measurementService","toolbarService","customizationService","clearMeasurements","initToolGroups","addButtons","toolbarButtons","createButtonSection","onModeExit","syncGroupService","segmentationService","uiDialogService","uiModalService","hideAll","hide","destroy","validationTags","study","series","isValidMode","modalities","modalitiesArray","split","valid","length","includes","description","routes","path","layoutTemplate","location","leftPanels","leftPanelResizable","rightPanels","rightPanelResizable","viewports","namespace","displaySetsToDisplay","extensions","hangingProtocol","sopClassHandlers"],"sourceRoot":""}